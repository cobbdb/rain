function MapController(a){var b,c=new google.maps.Geocoder;$(function(){$(window).resize(function(){var b=$(window).height(),c=$("#map").offset().top,d=$("#footer").height();$("#map").height(b-c-d),google.maps.event.trigger(a.map,"resize")}),b=setInterval(function(){$(window).resize()},1e3),$("#mapWell .btn-group .btn").click(function(a){$("#mapWell .btn-group .btn").removeClass("active"),$(a.target).addClass("active")}),$("#mapWell .btn-group").dragscrollable({dragSelector:"button"}),$.ajax({url:"//www.geoplugin.net/json.gp",dataType:"jsonp",jsonp:"jsoncallback",success:function(b){var c=b.geoplugin_latitude,d=b.geoplugin_longitude;a.map.setCenter(new google.maps.LatLng(c,d))},error:function(a){var b=_.template("Could not center map - <%= status %> : <%= text %>.");console.error(b({status:a.status,text:a.statusText}))}}),d()});var d=function(){$("#mapWell .navbar-search").show(),$("#graph").hide(),$("#map").fadeIn()},e=function(){$("#mapWell .navbar-search").hide(),$("#map").hide(),$("#graph").fadeIn()};_(a).extend({showSatellite:d,showRainfall:e,showUsage:e,showDownspout:e,search:function(){c.geocode({address:$("#mapSearch").val()},function(b,c){c==google.maps.GeocoderStatus.OK?a.map.setCenter(b[0].geometry.location):a.addAlert("Search was not successful for the following reason: "+c)})}})}function RainController(a){var b="2.1.0";localStorage.version=localStorage.version||b,localStorage.guideIsVisible=localStorage.guideIsVisible||!0,localStorage.version!==b&&(localStorage.guideIsVisible=!0,localStorage.version=b),_(a).extend({approUrl:"http://www.appropedia.org/Rainwater_Collection_Calculator",dismiss:function(a){var b=$(a.target).attr("data-dismiss");$(b).slideUp({queue:!1}).fadeOut({queue:!1})},map:new google.maps.Map($("#map")[0],{draggableCursor:"crosshair",draggingCursor:"move",center:new google.maps.LatLng(40.872738,-124.077417),zoom:18,tilt:0,mapTypeId:google.maps.MapTypeId.SATELLITE,disableDoubleClickZoon:!0,mapTypeControl:!1,streetViewControl:!1,panControl:!1}),mapType:google.maps.MapTypeId.SATELLITE,allMapTypes:_(google.maps.MapTypeId).values(),changeMapType:function(){a.map.setOptions({mapTypeId:a.mapType.toLowerCase()})},guideIsVisible:localStorage.guideIsVisible,showGuide:function(){localStorage.guideIsVisible=!0,a.guideIsVisible=!0},hideGuide:function(){localStorage.guideIsVisible=!1,a.guideIsVisible=!1},alerts:["We're still under construction, but be sure to check back soon!"],addAlert:function(b){a.alerts.push(b),a.$apply();var c=a.alerts.length-1;a.blink("#footErr"+c)},blink:function(a){for(var b=0;2>b;b+=1)$(a).fadeTo("fast",.5).fadeTo("fast",1)},data:{efficiency:1,getEfficiency:function(){var b=parseFloat(a.data.efficiency);return b.toPercentage()}}})}$(function(){$("#graph p").placeholder()});var InfoController=function(){};Number.prototype.roundToFixed=function(a){var b=this;return a=a||0,b*=Math.pow(10,a),b=Math.round(b),b/=Math.pow(10,a)},Number.prototype.toPercentage=function(a){var b=100*this;return b.roundToFixed(a)};