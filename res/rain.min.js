function MapController($scope){var a,b=new google.maps.Geocoder;$(function(){$(window).resize(function(){var a=$(window).height(),b=$("#map").offset().top,c=$("#footer").height();$("#map").height(a-b-c),google.maps.event.trigger($scope.map,"resize")}),a=setInterval(function(){$(window).resize()},1e3),$("#mapWell .btn-group .btn").click(function(a){$("#mapWell .btn-group .btn").removeClass("active"),$(a.target).addClass("active")}),$("#mapWell .btn-group").dragscrollable({dragSelector:"button"}),$.ajax({url:"//www.geoplugin.net/json.gp",dataType:"jsonp",jsonp:"jsoncallback",success:function(a){var b=a.geoplugin_latitude,c=a.geoplugin_longitude;$scope.map.setCenter(new google.maps.LatLng(b,c))},error:function(a){var b=_.template("Could not center map - <%= status %> : <%= text %>.");console.error(b({status:a.status,text:a.statusText}))}}),c()});var c=function(){$("#mapWell .navbar-search").show(),$("#graph").hide(),$("#map").fadeIn()},d=function(){$("#mapWell .navbar-search").hide(),$("#map").hide(),$("#graph").fadeIn()};_($scope).extend({showSatellite:c,showRainfall:d,showUsage:d,showDownspout:d,search:function(){b.geocode({address:$("#mapSearch").val()},function(a,b){b==google.maps.GeocoderStatus.OK?$scope.map.setCenter(a[0].geometry.location):$scope.addAlert("Search was not successful for the following reason: "+b)})}})}function RainController($scope){var a="2.1.0";localStorage.version=localStorage.version||a,localStorage.guideIsVisible=localStorage.guideIsVisible||!0,localStorage.version!==a&&(localStorage.guideIsVisible=!0,localStorage.version=a),_($scope).extend({approUrl:"http://www.appropedia.org/Rainwater_Collection_Calculator",dismiss:function($event){var a=$($event.target).attr("data-dismiss");$(a).slideUp({queue:!1}).fadeOut({queue:!1})},map:new google.maps.Map($("#map")[0],{draggableCursor:"crosshair",draggingCursor:"move",center:new google.maps.LatLng(40.872738,-124.077417),zoom:18,tilt:0,mapTypeId:google.maps.MapTypeId.SATELLITE,disableDoubleClickZoon:!0,mapTypeControl:!1,streetViewControl:!1,panControl:!1}),mapType:google.maps.MapTypeId.SATELLITE,allMapTypes:_(google.maps.MapTypeId).values(),changeMapType:function(){$scope.map.setOptions({mapTypeId:$scope.mapType.toLowerCase()})},guideIsVisible:localStorage.guideIsVisible,showGuide:function(){localStorage.guideIsVisible=!0,$scope.guideIsVisible=!0},hideGuide:function(){localStorage.guideIsVisible=!1,$scope.guideIsVisible=!1},alerts:["We're still under construction, but be sure to check back soon!"],addAlert:function(a){$scope.alerts.push(a),$scope.$apply();var b=$scope.alerts.length-1;$scope.blink("#footErr"+b)},blink:function(a){for(var b=0;2>b;b+=1)$(a).fadeTo("fast",.5).fadeTo("fast",1)},data:{efficiency:1,getEfficiency:function(){var a=parseFloat($scope.data.efficiency);return a.toPercentage()},monthlyRainfall:12}})}$(function(){$("#graph p").placeholder()});var InfoController=function(){};Number.prototype.roundToFixed=function(a){var b=this;return a=a||0,b*=Math.pow(10,a),b=Math.round(b),b/=Math.pow(10,a)},Number.prototype.toPercentage=function(a){var b=100*this;return b.roundToFixed(a)};